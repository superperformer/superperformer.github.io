<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
          (function () {
                const params = new Proxy(new URLSearchParams(window.location.search), {
                    get: (searchParams, prop) => searchParams.get(prop),
                });
                // Get the value of "some_key" in eg "https://example.com/?sym=1111,2222"
                let value = params.sym; // "some_value"
                console.log(value)


            })();
    </script>
    <style>
.post
{
    height: 500px;
    border: 3px solid black;
}

    </style>
</head>
<body>
    <div class="container">
        <ul class="tv-list">
            <article class="post">...</article>
            <article class="post">...</article>
            <article class="post">...</article>
        </ul>
      </div>

</body>
</html>

<script>

    const tvContainer = document.querySelector('.container')
    const tvList = document.querySelector('.tv-list')
    // 選到目標元素
    const loadingObserver = document.querySelector('.observer')
    // 每次載入的圖片數量
    const TV_PER_PAGE = 3
    // 每次要取得圖片的頁碼
    let page = 1

    const loadChart = () => {
        const newDiv = document.createElement('article');
        newDiv.className="post";
        newDiv.innerText=`load count: ${page}`;
        tvList.appendChild(newDiv);
        page++;
    }
    window.addEventListener('scroll', () => {
        const {
            scrollTop,
            scrollHeight,
            clientHeight
        } = document.documentElement;
        //scroll to bottom && has more data-to-come
        if (scrollTop + clientHeight >= scrollHeight - 5) {
            loadChart();
        }
    }, {
        passive: true
    });
</script>
